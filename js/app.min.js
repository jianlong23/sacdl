var Utils=function(){var n;return{getData:function(e){n=e},getBarData:function(){var e=n.children,a={labels:[],series:[]},t=[];return e.forEach(function(n){a.labels.push(n.name),t.push(n.children.length)}),a.series.push({label:"Projects count",values:t}),a},getStackData:function(){var e=n.children,a={name:"repos",languages:[]};return e.forEach(function(n){if("null"!==n.name){var e={language:n.name,count:n.children.length};a.languages.push(e)}}),[a]},getTreeData:function(){return n}}}();
var Searcher=function(){function t(){o.q=r.property("value")||"bitcoin";var t=[];for(var n in o)t.push(n+"="+o[n]);return s=e+"?"+t.join("&"),console.log(s),i.text("当前搜索地址: "+s),s}var e,r,n,i,s="",c=[],o={q:"bitcoin",sort:"forks",order:"desc",per_page:100};return{settings:{baseApiUrl:"https://api.github.com/search/repositories"},init:function(){r=d3.select("#search-input"),n=d3.select("#search-btn"),i=d3.select("#search-msg"),e=this.settings.baseApiUrl,n.on("click",function(){t(),c.forEach(function(t){try{t(s)}catch(e){console.log(e)}})})},addListener:function(t){c.push(t)}}}();
var Bar=function(){function t(t){for(var e=0;e<t.labels.length;e++)for(var r=0;r<t.series.length;r++)u.push(t.series[r].values[e])}function e(){u=[],a=Utils.getBarData(),i=l*a.series.length,t(a);var e=d3.scale.category20(),r=l*u.length+c*a.labels.length,g=d3.scale.linear().domain([0,d3.max(u)]).range([0,s]),h=d3.scale.linear().range([r+c,0]);n=d3.svg.axis().scale(h).tickFormat("").tickSize(0).orient("left");var f=chart.attr("width",o+s+d).attr("height",r),p=f.selectAll("g").data(u,function(t,e){return[t,e]}),x=p.enter().append("g").attr("transform",function(t,e){return"translate("+o+","+(e*l+c*(.5+Math.floor(e/a.series.length)))+")"});x.append("rect").attr("fill",function(t,r){return e(r%a.series.length)}).attr("class","bar").attr("width",g).attr("height",l-1),x.append("text").attr("x",function(t){return g(t)-3}).attr("y",l/2).attr("fill","red").attr("dy",".35em").text(function(t){return t}),x.append("text").attr("class","label").attr("x",function(t){return-10}).attr("y",i/2).attr("dy",".35em").text(function(t,e){return e%a.series.length===0?a.labels[Math.floor(e/a.series.length)]:""}),p.exit().transition().style({opacity:0}).remove(),f.append("g").attr("class","y axis").attr("transform","translate("+o+", "+-c/2+")").call(n);var b=18,v=4,y=f.selectAll(".legend").data(a.series),m=y.enter().append("g").attr("transform",function(t,e){var r=b+v,a=-c/2,n=o+s+40-b,l=e*r-a;return"translate("+n+","+l+")"});m.append("rect").attr("width",b).attr("height",b).style("fill",function(t,r){return e(r)}).style("stroke",function(t,r){return e(r)}),m.append("text").attr("class","legend").attr("x",b+v).attr("y",b-v).text(function(t){return t.label}),y.exit().remove()}var r,a,n,s=300,l=20,i=0,c=10,o=150,d=150,u=[];return{settings:{title:"barTitle",desc:"barDesc",barId:"#barId"},init:function(){r=this.settings.barId,d3.select("#barTitle").text(this.settings.title),d3.select("#barDesc").text(this.settings.desc),chart=d3.select(r).append("svg").attr("class","chart")},show:function(){e()}}}();
var Treemap=function(){function t(t){p=f=Utils.getTreeData(t);var a=i.nodes(f).filter(function(t){return!t.children}),s=c.selectAll("g").data(a,function(t){return t.watchers_count}).enter().append("g").attr("class","cell").attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).on("click",function(t){return r(p==t.parent?f:t.parent)});s.append("rect").attr("width",function(t){return t.dx-1}).attr("height",function(t){return t.dy-1}).style("fill",function(t){return d(t.parent.name)}),s.append("text").attr("x",function(t){return 2*t.dx/3+20}).attr("y",function(t){return t.dy/2}).attr("dy",".35em").attr("text-anchor","middle").text(function(t){return t.name}).style("opacity",function(t){return t.w=this.getComputedTextLength(),1}),c.selectAll("g").data(a).exit().transition().style({opacity:0}).remove(),d3.select(window).on("click",function(){r(f)}),d3.select("#treemapSelect").on("change",function(){i.value("watchers"==this.value?e:n).nodes(f),r(p)})}function e(t){return t.watchers_count}function n(t){return t.forks_count}function r(t){var e=s/t.dx,n=o/t.dy;u.domain([t.x,t.x+t.dx]),l.domain([t.y,t.y+t.dy]);var r=c.selectAll("g.cell").transition().duration(d3.event.altKey?7500:750).attr("transform",function(t){return"translate("+u(t.x)+","+l(t.y)+")"});r.select("rect").attr("width",function(t){return e*t.dx-1}).attr("height",function(t){return n*t.dy-1}),r.select("text").attr("x",function(t){return 2*e*t.dx/3+20}).attr("y",function(t){return n*t.dy/2}).style("opacity",function(t){return 1}),p=t,d3.event.stopPropagation()}var a,i,c,s=970,o=500,u=d3.scale.linear().range([0,s]),l=d3.scale.linear().range([0,o]),d=d3.scale.category20c(),f=[],p=[];return{settings:{title:"treemapTitle",desc:"treemapDesc",treemapId:"#treemapId"},init:function(){var t=this.settings.treemapId;d3.select("#treemapTitle").text(this.settings.title),d3.select("#treemapDesc").text(this.settings.desc),a=d3.select(t).append("div").attr("class","chart").style("width",s+"px").style("height",o+"px"),c=a.append("svg").attr("width",s).attr("height",o).append("g").attr("transform","translate(.5,.5)"),i=d3.layout.treemap().size([s,o]).value(function(t){return t.watchers_count})},show:function(e){t(e)}}}();
!function(){function e(e){var a=setTimeout(function(){t.style.display="block"},300);e=e||"http://localhost:3000/search",d3.json(e,function(e,i){e&&(clearTimeout(a),t.style.display="none",alert("加载数据失败，请检查您的网络设置。")),Utils.getData(i),Bar.show(),Treemap.show(),clearTimeout(a),t.style.display="none"})}var t=document.getElementById("modal");Searcher.init(),Bar.settings={title:"Top100 BarChart",desc:"This is a good example.",barId:"#barId"},Bar.init(),Treemap.settings={title:"Top100 treemap",desc:"You can click the block to zoom it.",treemapId:"#sacdlTreemap"},Treemap.init(),Searcher.addListener(function(t){e(t)}),e()}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxzLmpzIiwic2VhcmNoZXIuanMiLCJiYXIuanMiLCJ0cmVlbWFwLmpzIiwiYXBwLmpzIl0sIm5hbWVzIjpbIlV0aWxzIiwidHJlZURhdGEiLCJnZXREYXRhIiwiZGF0YSIsImdldEJhckRhdGEiLCJpdGVtcyIsImNoaWxkcmVuIiwicmVzdWx0IiwibGFiZWxzIiwic2VyaWVzIiwidmFsdWVzIiwiZm9yRWFjaCIsIml0ZW0iLCJwdXNoIiwibmFtZSIsImxlbmd0aCIsImxhYmVsIiwiZ2V0U3RhY2tEYXRhIiwibGFuZ3VhZ2VzIiwiY2hpbGQiLCJsYW5ndWFnZSIsImNvdW50IiwiZ2V0VHJlZURhdGEiLCJTZWFyY2hlciIsInBhcnNlUXVlcnkiLCJxdWVyeSIsInEiLCJpbnB1dFR4dCIsInByb3BlcnR5IiwiYXJyIiwia2V5IiwidXJsIiwiYmFzZUFwaVVybCIsImpvaW4iLCJjb25zb2xlIiwibG9nIiwic2VhcmNoTXNnIiwidGV4dCIsInNlYXJjaEJ0biIsImxpc3RlbmVycyIsInNvcnQiLCJvcmRlciIsInBlcl9wYWdlIiwic2V0dGluZ3MiLCJpbml0IiwiZDMiLCJzZWxlY3QiLCJ0aGlzIiwib24iLCJsaXN0ZW5lciIsImVycm9yIiwiYWRkTGlzdGVuZXIiLCJCYXIiLCJ6aXBwaW5nRGF0YSIsImkiLCJqIiwiemlwcGVkRGF0YSIsInNob3dCYXIiLCJncm91cEhlaWdodCIsImJhckhlaWdodCIsImNvbG9yIiwic2NhbGUiLCJjYXRlZ29yeTIwIiwiY2hhcnRIZWlnaHQiLCJnYXBCZXR3ZWVuR3JvdXBzIiwieCIsImxpbmVhciIsImRvbWFpbiIsIm1heCIsInJhbmdlIiwiY2hhcnRXaWR0aCIsInkiLCJ5QXhpcyIsInN2ZyIsImF4aXMiLCJ0aWNrRm9ybWF0IiwidGlja1NpemUiLCJvcmllbnQiLCJjaGFydCIsImF0dHIiLCJzcGFjZUZvckxhYmVscyIsInNwYWNlRm9yTGVnZW5kIiwiYmFyTm9kZXMiLCJzZWxlY3RBbGwiLCJkIiwiYmFyIiwiZW50ZXIiLCJhcHBlbmQiLCJNYXRoIiwiZmxvb3IiLCJleGl0IiwidHJhbnNpdGlvbiIsInN0eWxlIiwib3BhY2l0eSIsInJlbW92ZSIsImNhbGwiLCJsZWdlbmRSZWN0U2l6ZSIsImxlZ2VuZFNwYWNpbmciLCJsZWdlbmREYXRhIiwibGVnZW5kIiwiaGVpZ2h0Iiwib2Zmc2V0IiwiaG9yeiIsInZlcnQiLCJiYXJJZCIsInRpdGxlIiwiZGVzYyIsInNob3ciLCJUcmVlbWFwIiwic2hvd0NoYXJ0Iiwibm9kZSIsInJvb3QiLCJub2RlcyIsInRyZWVtYXAiLCJmaWx0ZXIiLCJjZWxsIiwid2F0Y2hlcnNfY291bnQiLCJ6b29tIiwicGFyZW50IiwiZHgiLCJkeSIsInciLCJnZXRDb21wdXRlZFRleHRMZW5ndGgiLCJ3aW5kb3ciLCJ2YWx1ZSIsIndhdGNoZXJzQ291bnQiLCJmb3Jrc0NvdW50IiwiZm9ya3NfY291bnQiLCJreCIsImt5IiwiaCIsInQiLCJkdXJhdGlvbiIsImV2ZW50IiwiYWx0S2V5Iiwic3RvcFByb3BhZ2F0aW9uIiwiY2F0ZWdvcnkyMGMiLCJ0cmVlbWFwSWQiLCJsYXlvdXQiLCJzaXplIiwibG9hZGVyIiwic2V0VGltZW91dCIsImxvYWRpbmciLCJkaXNwbGF5IiwianNvbiIsImVyciIsImNsZWFyVGltZW91dCIsImFsZXJ0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCJdLCJtYXBwaW5ncyI6IkFBSUEsR0FBSUEsT0FBUyxXQUNULEdBQUlDLEVBRUosUUFDSUMsUUFBUyxTQUFTQyxHQUNkRixFQUFXRSxHQWdCZkMsV0FBWSxXQUNSLEdBQUlDLEdBQVFKLEVBQVNLLFNBQ2pCQyxHQUNJQyxVQUNBQyxXQUVKQyxJQVlKLE9BVkFMLEdBQU1NLFFBQVEsU0FBU0MsR0FDbkJMLEVBQU9DLE9BQU9LLEtBQUtELEVBQUtFLE1BQ3hCSixFQUFPRyxLQUFLRCxFQUFLTixTQUFTUyxVQUc5QlIsRUFBT0UsT0FBT0ksTUFDVkcsTUFBTyxpQkFDUE4sT0FBUUEsSUFHTEgsR0FVWFUsYUFBYyxXQUNWLEdBQUlaLEdBQVFKLEVBQVNLLFNBRWpCQyxHQUNBTyxLQUFNLFFBQ05JLGFBZ0JKLE9BWkFiLEdBQU1NLFFBQVEsU0FBU0MsR0FDbkIsR0FBa0IsU0FBZEEsRUFBS0UsS0FBVCxDQUdBLEdBQUlLLElBQ0FDLFNBQVVSLEVBQUtFLEtBQ2ZPLE1BQU9ULEVBQUtOLFNBQVNTLE9BR3pCUixHQUFPVyxVQUFVTCxLQUFLTSxPQUdsQlosSUFlWmUsWUFBYSxXQUNULE1BQU9yQjtBQ3RGbkIsR0FBSXNCLFVBQVksV0EyQ1osUUFBU0MsS0FDTEMsRUFBTUMsRUFBSUMsRUFBU0MsU0FBUyxVQUFZLFNBQ3hDLElBQUlDLEtBRUosS0FBSyxHQUFJQyxLQUFPTCxHQUNaSSxFQUFJaEIsS0FBS2lCLEVBQU0sSUFBTUwsRUFBTUssR0FPL0IsT0FKQUMsR0FBTUMsRUFBYSxJQUFNSCxFQUFJSSxLQUFLLEtBRWxDQyxRQUFRQyxJQUFJSixHQUNaSyxFQUFVQyxLQUFLLFdBQWFOLEdBQ3JCQSxFQXREWCxHQUNJQyxHQUNBTCxFQUNBVyxFQUNBRixFQUpBTCxFQUFNLEdBS05RLEtBQ0FkLEdBQ0lDLEVBQUcsVUFDSGMsS0FBTSxRQUNOQyxNQUFPLE9BQ1BDLFNBQVUsSUFHbEIsUUFDSUMsVUFDSVgsV0FBWSw4Q0FHaEJZLEtBQU0sV0FDRmpCLEVBQVdrQixHQUFHQyxPQUFPLGlCQUNyQlIsRUFBWU8sR0FBR0MsT0FBTyxlQUN0QlYsRUFBWVMsR0FBR0MsT0FBTyxlQUV0QmQsRUFBYWUsS0FBS0osU0FBU1gsV0FFM0JNLEVBQVVVLEdBQUcsUUFBUyxXQUNsQnhCLElBQ0FlLEVBQVU1QixRQUFRLFNBQVNzQyxHQUN2QixJQUNJQSxFQUFTbEIsR0FDWCxNQUFPbUIsR0FDTGhCLFFBQVFDLElBQUllLFNBTTVCQyxZQUFhLFNBQVNGLEdBQ2xCVixFQUFVMUIsS0FBS29DO0FDdkMzQixHQUFJRyxLQUFPLFdBcUNQLFFBQVNDLEdBQVlsRCxHQUNqQixJQUFLLEdBQUltRCxHQUFJLEVBQUdBLEVBQUluRCxFQUFLSyxPQUFPTyxPQUFRdUMsSUFDcEMsSUFBSyxHQUFJQyxHQUFJLEVBQUdBLEVBQUlwRCxFQUFLTSxPQUFPTSxPQUFRd0MsSUFDcENDLEVBQVczQyxLQUFLVixFQUFLTSxPQUFPOEMsR0FBRzdDLE9BQU80QyxJQUtsRCxRQUFTRyxLQUVMRCxLQUVBckQsRUFBT0gsTUFBTUksYUFDYnNELEVBQWNDLEVBQVl4RCxFQUFLTSxPQUFPTSxPQUV0Q3NDLEVBQVlsRCxFQUdaLElBQUl5RCxHQUFRZixHQUFHZ0IsTUFBTUMsYUFDakJDLEVBQWNKLEVBQVlILEVBQVd6QyxPQUFTaUQsRUFBbUI3RCxFQUFLSyxPQUFPTyxPQUU3RWtELEVBQUlwQixHQUFHZ0IsTUFBTUssU0FDWkMsUUFBUSxFQUFHdEIsR0FBR3VCLElBQUlaLEtBQ2xCYSxPQUFPLEVBQUdDLElBRVhDLEVBQUkxQixHQUFHZ0IsTUFBTUssU0FDWkcsT0FBT04sRUFBY0MsRUFBa0IsR0FFNUNRLEdBQVEzQixHQUFHNEIsSUFBSUMsT0FDVmIsTUFBTVUsR0FDTkksV0FBVyxJQUNYQyxTQUFTLEdBQ1RDLE9BQU8sT0FFWixJQUFJSixHQUFNSyxNQUNMQyxLQUFLLFFBQVNDLEVBQWlCVixFQUFhVyxHQUM1Q0YsS0FBSyxTQUFVaEIsR0FHaEJtQixFQUFXVCxFQUFJVSxVQUFVLEtBQUtoRixLQUFLcUQsRUFBWSxTQUFVNEIsRUFBRzlCLEdBQzVELE9BQVE4QixFQUFHOUIsS0FJWCtCLEVBQU1ILEVBQ0xJLFFBQ0FDLE9BQU8sS0FDUFIsS0FBSyxZQUFhLFNBQVNLLEVBQUc5QixHQUMzQixNQUFPLGFBQWUwQixFQUFpQixLQUFPMUIsRUFBSUssRUFBWUssR0FBb0IsR0FBTXdCLEtBQUtDLE1BQU1uQyxFQUFJbkQsRUFBS00sT0FBT00sVUFBWSxLQUl2SXNFLEdBQUlFLE9BQU8sUUFDTlIsS0FBSyxPQUFRLFNBQVNLLEVBQUc5QixHQUN0QixNQUFPTSxHQUFNTixFQUFJbkQsRUFBS00sT0FBT00sVUFFaENnRSxLQUFLLFFBQVMsT0FDZEEsS0FBSyxRQUFTZCxHQUNkYyxLQUFLLFNBQVVwQixFQUFZLEdBR2hDMEIsRUFBSUUsT0FBTyxRQUNOUixLQUFLLElBQUssU0FBU0ssR0FDaEIsTUFBT25CLEdBQUVtQixHQUFLLElBRWpCTCxLQUFLLElBQUtwQixFQUFZLEdBQ3RCb0IsS0FBSyxPQUFRLE9BQ2JBLEtBQUssS0FBTSxTQUNYMUMsS0FBSyxTQUFTK0MsR0FDWCxNQUFPQSxLQUlmQyxFQUFJRSxPQUFPLFFBQ05SLEtBQUssUUFBUyxTQUNkQSxLQUFLLElBQUssU0FBU0ssR0FDaEIsWUFFSEwsS0FBSyxJQUFLckIsRUFBYyxHQUN4QnFCLEtBQUssS0FBTSxTQUNYMUMsS0FBSyxTQUFTK0MsRUFBRzlCLEdBQ2QsTUFBSUEsR0FBSW5ELEVBQUtNLE9BQU9NLFNBQVcsRUFDcEJaLEVBQUtLLE9BQU9nRixLQUFLQyxNQUFNbkMsRUFBSW5ELEVBQUtNLE9BQU9NLFNBRXZDLEtBSW5CbUUsRUFBU1EsT0FDSkMsYUFDQUMsT0FDR0MsUUFBUyxJQUVaQyxTQUVMckIsRUFBSWMsT0FBTyxLQUNOUixLQUFLLFFBQVMsVUFDZEEsS0FBSyxZQUFhLGFBQWVDLEVBQWlCLE1BQVFoQixFQUFtQixFQUFJLEtBQ2pGK0IsS0FBS3ZCLEVBR1YsSUFBSXdCLEdBQWlCLEdBQ2pCQyxFQUFnQixFQUVoQkMsRUFBYXpCLEVBQUlVLFVBQVUsV0FDMUJoRixLQUFLQSxFQUFLTSxRQUVYMEYsRUFBU0QsRUFDUlosUUFDQUMsT0FBTyxLQUNQUixLQUFLLFlBQWEsU0FBU0ssRUFBRzlCLEdBQzNCLEdBQUk4QyxHQUFTSixFQUFpQkMsRUFDMUJJLEdBQVVyQyxFQUFtQixFQUM3QnNDLEVBQU90QixFQUFpQlYsRUFBYSxHQUFLMEIsRUFDMUNPLEVBQU9qRCxFQUFJOEMsRUFBU0MsQ0FDeEIsT0FBTyxhQUFlQyxFQUFPLElBQU1DLEVBQU8sS0FHbERKLEdBQU9aLE9BQU8sUUFDVFIsS0FBSyxRQUFTaUIsR0FDZGpCLEtBQUssU0FBVWlCLEdBQ2ZKLE1BQU0sT0FBUSxTQUFTUixFQUFHOUIsR0FDdkIsTUFBT00sR0FBTU4sS0FFaEJzQyxNQUFNLFNBQVUsU0FBU1IsRUFBRzlCLEdBQ3pCLE1BQU9NLEdBQU1OLEtBR3JCNkMsRUFBT1osT0FBTyxRQUNUUixLQUFLLFFBQVMsVUFDZEEsS0FBSyxJQUFLaUIsRUFBaUJDLEdBQzNCbEIsS0FBSyxJQUFLaUIsRUFBaUJDLEdBQzNCNUQsS0FBSyxTQUFTK0MsR0FDWCxNQUFPQSxHQUFFcEUsUUFHakJrRixFQUFXUixPQUFPSSxTQTVLdEIsR0FNSVUsR0FFQXJHLEVBQ0FxRSxFQVRBRixFQUFhLElBQ2JYLEVBQVksR0FDWkQsRUFBYyxFQUNkTSxFQUFtQixHQUNuQmdCLEVBQWlCLElBQ2pCQyxFQUFpQixJQU9qQnpCLElBRUosUUFDSWIsVUFDSThELE1BQU8sV0FDUEMsS0FBTSxVQUNORixNQUFPLFVBR1g1RCxLQUFNLFdBQ0Y0RCxFQUFRekQsS0FBS0osU0FBUzZELE1BRXRCM0QsR0FBR0MsT0FBTyxhQUFhVCxLQUFLVSxLQUFLSixTQUFTOEQsT0FDMUM1RCxHQUFHQyxPQUFPLFlBQVlULEtBQUtVLEtBQUtKLFNBQVMrRCxNQUV6QzVCLE1BQVFqQyxHQUFHQyxPQUFPMEQsR0FBT2pCLE9BQU8sT0FDM0JSLEtBQUssUUFBUyxVQUd2QjRCLEtBQU0sV0FDRmxEO0FDakNaLEdBQUltRCxTQUFXLFdBbURYLFFBQVNDLEdBQVUxRyxHQUNmMkcsRUFBT0MsRUFBTy9HLE1BQU1zQixZQUFZbkIsRUFFaEMsSUFBSTZHLEdBQVFDLEVBQVFELE1BQU1ELEdBQ3JCRyxPQUFPLFNBQVM5QixHQUNiLE9BQVFBLEVBQUU5RSxXQUdkNkcsRUFBTzFDLEVBQUlVLFVBQVUsS0FDcEJoRixLQUFLNkcsRUFBTyxTQUFTNUIsR0FDbEIsTUFBT0EsR0FBRWdDLGlCQUVaOUIsUUFDQUMsT0FBTyxLQUNQUixLQUFLLFFBQVMsUUFDZEEsS0FBSyxZQUFhLFNBQVNLLEdBQ3hCLE1BQU8sYUFBZUEsRUFBRW5CLEVBQUksSUFBTW1CLEVBQUViLEVBQUksTUFFM0N2QixHQUFHLFFBQVMsU0FBU29DLEdBQ2xCLE1BQU9pQyxHQUFLUCxHQUFRMUIsRUFBRWtDLE9BQVNQLEVBQU8zQixFQUFFa0MsU0FHaERILEdBQUs1QixPQUFPLFFBQ1BSLEtBQUssUUFBUyxTQUFTSyxHQUNwQixNQUFPQSxHQUFFbUMsR0FBSyxJQUVqQnhDLEtBQUssU0FBVSxTQUFTSyxHQUNyQixNQUFPQSxHQUFFb0MsR0FBSyxJQUVqQjVCLE1BQU0sT0FBUSxTQUFTUixHQUNwQixNQUFPeEIsR0FBTXdCLEVBQUVrQyxPQUFPeEcsUUFHOUJxRyxFQUFLNUIsT0FBTyxRQUNQUixLQUFLLElBQUssU0FBU0ssR0FDaEIsTUFBTyxHQUFJQSxFQUFFbUMsR0FBSyxFQUFJLEtBRXpCeEMsS0FBSyxJQUFLLFNBQVNLLEdBQ2hCLE1BQU9BLEdBQUVvQyxHQUFLLElBRWpCekMsS0FBSyxLQUFNLFNBQ1hBLEtBQUssY0FBZSxVQUNwQjFDLEtBQUssU0FBUytDLEdBQ1gsTUFBT0EsR0FBRXRFLE9BRVo4RSxNQUFNLFVBQVcsU0FBU1IsR0FFdkIsTUFEQUEsR0FBRXFDLEVBQUkxRSxLQUFLMkUsd0JBQ0osSUFJZmpELEVBQUlVLFVBQVUsS0FDVGhGLEtBQUs2RyxHQUNMdEIsT0FDQUMsYUFDQUMsT0FDR0MsUUFBUyxJQUVaQyxTQUVMakQsR0FBR0MsT0FBTzZFLFFBQVEzRSxHQUFHLFFBQVMsV0FDMUJxRSxFQUFLTixLQUdUbEUsR0FBR0MsT0FBTyxrQkFBa0JFLEdBQUcsU0FBVSxXQUNyQ2lFLEVBQVFXLE1BQW9CLFlBQWQ3RSxLQUFLNkUsTUFBc0JDLEVBQWdCQyxHQUFZZCxNQUFNRCxHQUMzRU0sRUFBS1AsS0FJYixRQUFTZSxHQUFjekMsR0FDbkIsTUFBT0EsR0FBRWdDLGVBR2IsUUFBU1UsR0FBVzFDLEdBQ2hCLE1BQU9BLEdBQUUyQyxZQUdiLFFBQVNWLEdBQUtqQyxHQUNWLEdBQUk0QyxHQUFLUCxFQUFJckMsRUFBRW1DLEdBQ1hVLEVBQUtDLEVBQUk5QyxFQUFFb0MsRUFDZnZELEdBQUVFLFFBQVFpQixFQUFFbkIsRUFBR21CLEVBQUVuQixFQUFJbUIsRUFBRW1DLEtBQ3ZCaEQsRUFBRUosUUFBUWlCLEVBQUViLEVBQUdhLEVBQUViLEVBQUlhLEVBQUVvQyxJQUV2QixJQUFJVyxHQUFJMUQsRUFBSVUsVUFBVSxVQUFVUSxhQUMzQnlDLFNBQVN2RixHQUFHd0YsTUFBTUMsT0FBUyxLQUFPLEtBQ2xDdkQsS0FBSyxZQUFhLFNBQVNLLEdBQ3hCLE1BQU8sYUFBZW5CLEVBQUVtQixFQUFFbkIsR0FBSyxJQUFNTSxFQUFFYSxFQUFFYixHQUFLLEtBR3RENEQsR0FBRXJGLE9BQU8sUUFDSmlDLEtBQUssUUFBUyxTQUFTSyxHQUNwQixNQUFPNEMsR0FBSzVDLEVBQUVtQyxHQUFLLElBRXRCeEMsS0FBSyxTQUFVLFNBQVNLLEdBQ3JCLE1BQU82QyxHQUFLN0MsRUFBRW9DLEdBQUssSUFHM0JXLEVBQUVyRixPQUFPLFFBQ0ppQyxLQUFLLElBQUssU0FBU0ssR0FDaEIsTUFBTyxHQUFJNEMsRUFBSzVDLEVBQUVtQyxHQUFLLEVBQUksS0FFOUJ4QyxLQUFLLElBQUssU0FBU0ssR0FDaEIsTUFBTzZDLEdBQUs3QyxFQUFFb0MsR0FBSyxJQUV0QjVCLE1BQU0sVUFBVyxTQUFTUixHQUN2QixNQUFPLEtBSWYwQixFQUFPMUIsRUFDUHZDLEdBQUd3RixNQUFNRSxrQkFqS2IsR0FPSXpELEdBQ0FtQyxFQUNBeEMsRUFUQWdELEVBQUksSUFDSlMsRUFBSSxJQUNKakUsRUFBSXBCLEdBQUdnQixNQUFNSyxTQUFTRyxPQUFPLEVBQUdvRCxJQUNoQ2xELEVBQUkxQixHQUFHZ0IsTUFBTUssU0FBU0csT0FBTyxFQUFHNkQsSUFDaEN0RSxFQUFRZixHQUFHZ0IsTUFBTTJFLGNBQ2pCekIsS0FDQUQsSUFLSixRQUNJbkUsVUFDSThELE1BQU8sZUFDUEMsS0FBTSxjQUNOK0IsVUFBVyxjQUdmN0YsS0FBTSxXQUNGLEdBQUk2RixHQUFZMUYsS0FBS0osU0FBUzhGLFNBRTlCNUYsSUFBR0MsT0FBTyxpQkFBaUJULEtBQUtVLEtBQUtKLFNBQVM4RCxPQUM5QzVELEdBQUdDLE9BQU8sZ0JBQWdCVCxLQUFLVSxLQUFLSixTQUFTK0QsTUFFN0M1QixFQUFRakMsR0FBR0MsT0FBTzJGLEdBQVdsRCxPQUFPLE9BQy9CUixLQUFLLFFBQVMsU0FDZGEsTUFBTSxRQUFTNkIsRUFBSSxNQUNuQjdCLE1BQU0sU0FBVXNDLEVBQUksTUFFekJ6RCxFQUFNSyxFQUNEUyxPQUFPLE9BQ1BSLEtBQUssUUFBUzBDLEdBQ2QxQyxLQUFLLFNBQVVtRCxHQUNmM0MsT0FBTyxLQUNQUixLQUFLLFlBQWEsb0JBRXZCa0MsRUFBVXBFLEdBQUc2RixPQUFPekIsVUFFZjBCLE1BQU1sQixFQUFHUyxJQUVUTixNQUFNLFNBQVN4QyxHQUNaLE1BQU9BLEdBQUVnQyxrQkFJckJULEtBQU0sU0FBU3hHLEdBQ1gwRyxFQUFVMUc7Q0NuRHRCLFdBNEJJLFFBQVN3RyxHQUFLNUUsR0FDVixHQUFJNkcsR0FBU0MsV0FBVyxXQUNwQkMsRUFBUWxELE1BQU1tRCxRQUFVLFNBQ3pCLElBRUhoSCxHQUFNQSxHQUFPLCtCQUViYyxHQUFHbUcsS0FBS2pILEVBQUssU0FBU2tILEVBQUs5SSxHQUNuQjhJLElBQ0FDLGFBQWFOLEdBQ2JFLEVBQVFsRCxNQUFNbUQsUUFBVSxPQUN4QkksTUFBTSxzQkFHVm5KLE1BQU1FLFFBQVFDLEdBRWRpRCxJQUFJdUQsT0FDSkMsUUFBUUQsT0FFUnVDLGFBQWFOLEdBQ2JFLEVBQVFsRCxNQUFNbUQsUUFBVSxTQS9DaEMsR0FBSUQsR0FBVU0sU0FBU0MsZUFBZSxRQUt0QzlILFVBQVNxQixPQUtUUSxJQUFJVCxVQUNBOEQsTUFBTyxrQkFDUEMsS0FBTSwwQkFDTkYsTUFBTyxVQUVYcEQsSUFBSVIsT0FLSmdFLFFBQVFqRSxVQUNKOEQsTUFBTyxpQkFDUEMsS0FBTSxzQ0FDTitCLFVBQVcsaUJBRWY3QixRQUFRaEUsT0EwQlJyQixTQUFTNEIsWUFBWSxTQUFTcEIsR0FDMUI0RSxFQUFLNUUsS0FHVDRFIiwiZmlsZSI6InNhY2RsLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICog5pWw5o2u5aSE55CG5Luj56CBXG4gKiBAdHlwZSB7e2dldERhdGEsIGdldEJhckRhdGEsIGdldFN0YWNrRGF0YSwgZ2V0VHJlZURhdGF9fVxuICovXG52YXIgVXRpbHMgPSAoZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRyZWVEYXRhO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0RGF0YTogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgdHJlZURhdGEgPSBkYXRhO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgRGF0YSBmb3JtYXQ6XG4gICAgICAgIHtcbiAgICAgICAgICAgIGxhYmVsczogW1xuICAgICAgICAgICAgICAgICdjL2MrKycsICdweXRob24nLCAnamF2YXNjcmlwdCcsXG4gICAgICAgICAgICAgICAgJ2phdmEnLCAncnVieScsICdodG1sJ1xuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHNlcmllczogW3tcbiAgICAgICAgICAgICAgICBsYWJlbDogJ1Byb2plY3RzIGNvdW50JyxcbiAgICAgICAgICAgICAgICB2YWx1ZXM6IFs0LCA4LCAxNSwgMTYsIDIzLCA0Ml0gLy9jb3VudHNcbiAgICAgICAgICAgIH1dXG4gICAgICAgIH1cbiAgICAgICAgKi9cbiAgICAgICAgZ2V0QmFyRGF0YTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaXRlbXMgPSB0cmVlRGF0YS5jaGlsZHJlbjtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsczogW10sXG4gICAgICAgICAgICAgICAgICAgIHNlcmllczogW11cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlcyA9IFtdO1xuXG4gICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICByZXN1bHQubGFiZWxzLnB1c2goaXRlbS5uYW1lKTtcbiAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaChpdGVtLmNoaWxkcmVuLmxlbmd0aCk7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICByZXN1bHQuc2VyaWVzLnB1c2goe1xuICAgICAgICAgICAgICAgIGxhYmVsOiAnUHJvamVjdHMgY291bnQnLFxuICAgICAgICAgICAgICAgIHZhbHVlczogdmFsdWVzXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgIHsgbmFtZTogXCJyZXBvc1wiICwgXG4gICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2VzOiBbICB7IGxhbmd1YWdlOiAnanMnLCBjb3VudDogMzAwMCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGxhbmd1YWdlOiAncnVieScsIGNvdW50OiAxMzAwIH1dXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgZ2V0U3RhY2tEYXRhOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBpdGVtcyA9IHRyZWVEYXRhLmNoaWxkcmVuO1xuXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwicmVwb3NcIixcbiAgICAgICAgICAgICAgICBsYW5ndWFnZXM6IFtdXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vMS4g56Gu5a6a5Yid5aeL5pWw5o2uXG4gICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5uYW1lID09PSBcIm51bGxcIikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2U6IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgY291bnQ6IGl0ZW0uY2hpbGRyZW4ubGVuZ3RoXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJlc3VsdC5sYW5ndWFnZXMucHVzaChjaGlsZCk7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICByZXR1cm4gW3Jlc3VsdF07XG4gICAgICAgIH0sXG4gICAgICAgIC8qKiBEYXRhIGZvcm1hdDpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwibGFuZ3VhZ2VzXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiY2hpbGRyZW5cIjogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcImphdmFzY3JpcHRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hpbGRyZW5cIjogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJpbWZseS9teUlERVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwid2F0Y2hlcnNfY291bnRcIjogMTAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZm9ya3NfY291bnRcIjogNTBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICovXG4gICAgICAgIGdldFRyZWVEYXRhOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0cmVlRGF0YTtcbiAgICAgICAgfVxuICAgIH1cbn0oKSlcbiIsIi8qKlxuICog5pCc57Si5qGG5aSE55CG5Luj56CBXG4gKiBAdHlwZSB7e3NldHRpbmdzLCBpbml0LCBhZGRMaXN0ZW5lcn19XG4gKi9cbnZhciBTZWFyY2hlciA9IChmdW5jdGlvbigpIHtcbiAgICB2YXIgdXJsID0gJycsXG4gICAgICAgIGJhc2VBcGlVcmwsXG4gICAgICAgIGlucHV0VHh0LFxuICAgICAgICBzZWFyY2hCdG4sXG4gICAgICAgIHNlYXJjaE1zZyxcbiAgICAgICAgbGlzdGVuZXJzID0gW10sXG4gICAgICAgIHF1ZXJ5ID0ge1xuICAgICAgICAgICAgcTogJ2JpdGNvaW4nLFxuICAgICAgICAgICAgc29ydDogXCJmb3Jrc1wiLFxuICAgICAgICAgICAgb3JkZXI6IFwiZGVzY1wiLFxuICAgICAgICAgICAgcGVyX3BhZ2U6IDEwMFxuICAgICAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgIGJhc2VBcGlVcmw6ICdodHRwczovL2FwaS5naXRodWIuY29tL3NlYXJjaC9yZXBvc2l0b3JpZXMnXG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpbnB1dFR4dCA9IGQzLnNlbGVjdCgnI3NlYXJjaC1pbnB1dCcpO1xuICAgICAgICAgICAgc2VhcmNoQnRuID0gZDMuc2VsZWN0KCcjc2VhcmNoLWJ0bicpO1xuICAgICAgICAgICAgc2VhcmNoTXNnID0gZDMuc2VsZWN0KCcjc2VhcmNoLW1zZycpXG5cbiAgICAgICAgICAgIGJhc2VBcGlVcmwgPSB0aGlzLnNldHRpbmdzLmJhc2VBcGlVcmw7XG5cbiAgICAgICAgICAgIHNlYXJjaEJ0bi5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBwYXJzZVF1ZXJ5KCk7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24obGlzdGVuZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyKHVybCk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSxcblxuICAgICAgICBhZGRMaXN0ZW5lcjogZnVuY3Rpb24obGlzdGVuZXIpIHtcbiAgICAgICAgICAgIGxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBwYXJzZVF1ZXJ5KCkge1xuICAgICAgICBxdWVyeS5xID0gaW5wdXRUeHQucHJvcGVydHkoJ3ZhbHVlJykgfHwgJ2JpdGNvaW4nO1xuICAgICAgICB2YXIgYXJyID0gW107XG5cbiAgICAgICAgZm9yICh2YXIga2V5IGluIHF1ZXJ5KSB7XG4gICAgICAgICAgICBhcnIucHVzaChrZXkgKyAnPScgKyBxdWVyeVtrZXldKTtcbiAgICAgICAgfTtcblxuICAgICAgICB1cmwgPSBiYXNlQXBpVXJsICsgJz8nICsgYXJyLmpvaW4oJyYnKTtcblxuICAgICAgICBjb25zb2xlLmxvZyh1cmwpO1xuICAgICAgICBzZWFyY2hNc2cudGV4dCgn5b2T5YmN5pCc57Si5Zyw5Z2AOiAnICsgdXJsKTtcbiAgICAgICAgcmV0dXJuIHVybDtcbiAgICB9XG59KCkpXG4iLCIvKipcbiAqIEQzLmpz55qE5p+x54q25Zu+5Luj56CBXG4gKiBAdHlwZSB7e3NldHRpbmdzLCBpbml0LCBzaG93fX1cbiAqL1xudmFyIEJhciA9IChmdW5jdGlvbigpIHtcbiAgICB2YXIgY2hhcnRXaWR0aCA9IDMwMCxcbiAgICAgICAgYmFySGVpZ2h0ID0gMjAsXG4gICAgICAgIGdyb3VwSGVpZ2h0ID0gMCxcbiAgICAgICAgZ2FwQmV0d2Vlbkdyb3VwcyA9IDEwLFxuICAgICAgICBzcGFjZUZvckxhYmVscyA9IDE1MCxcbiAgICAgICAgc3BhY2VGb3JMZWdlbmQgPSAxNTAsXG4gICAgICAgIGJhcklkLFxuICAgICAgICBzdmcsXG4gICAgICAgIGRhdGEsXG4gICAgICAgIHlBeGlzO1xuXG4gICAgLy8gWmlwIHRoZSBzZXJpZXMgZGF0YSB0b2dldGhlciAoZmlyc3QgdmFsdWVzLCBzZWNvbmQgdmFsdWVzLCBldGMuKVxuICAgIHZhciB6aXBwZWREYXRhID0gW107XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgdGl0bGU6IFwiYmFyVGl0bGVcIixcbiAgICAgICAgICAgIGRlc2M6IFwiYmFyRGVzY1wiLFxuICAgICAgICAgICAgYmFySWQ6IFwiI2JhcklkXCJcbiAgICAgICAgfSxcblxuICAgICAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGJhcklkID0gdGhpcy5zZXR0aW5ncy5iYXJJZDtcblxuICAgICAgICAgICAgZDMuc2VsZWN0KFwiI2JhclRpdGxlXCIpLnRleHQodGhpcy5zZXR0aW5ncy50aXRsZSk7XG4gICAgICAgICAgICBkMy5zZWxlY3QoXCIjYmFyRGVzY1wiKS50ZXh0KHRoaXMuc2V0dGluZ3MuZGVzYyk7XG5cbiAgICAgICAgICAgIGNoYXJ0ID0gZDMuc2VsZWN0KGJhcklkKS5hcHBlbmQoXCJzdmdcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiY2hhcnRcIik7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2hvdzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzaG93QmFyKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiB6aXBwaW5nRGF0YShkYXRhKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sYWJlbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGF0YS5zZXJpZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICB6aXBwZWREYXRhLnB1c2goZGF0YS5zZXJpZXNbal0udmFsdWVzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNob3dCYXIoKSB7XG4gICAgICAgIC8vQ2xlYW5cbiAgICAgICAgemlwcGVkRGF0YSA9IFtdO1xuXG4gICAgICAgIGRhdGEgPSBVdGlscy5nZXRCYXJEYXRhKCk7XG4gICAgICAgIGdyb3VwSGVpZ2h0ID0gYmFySGVpZ2h0ICogZGF0YS5zZXJpZXMubGVuZ3RoO1xuXG4gICAgICAgIHppcHBpbmdEYXRhKGRhdGEpO1xuXG4gICAgICAgIC8vIENvbG9yIHNjYWxlXG4gICAgICAgIHZhciBjb2xvciA9IGQzLnNjYWxlLmNhdGVnb3J5MjAoKTtcbiAgICAgICAgdmFyIGNoYXJ0SGVpZ2h0ID0gYmFySGVpZ2h0ICogemlwcGVkRGF0YS5sZW5ndGggKyBnYXBCZXR3ZWVuR3JvdXBzICogZGF0YS5sYWJlbHMubGVuZ3RoO1xuXG4gICAgICAgIHZhciB4ID0gZDMuc2NhbGUubGluZWFyKClcbiAgICAgICAgICAgIC5kb21haW4oWzAsIGQzLm1heCh6aXBwZWREYXRhKV0pXG4gICAgICAgICAgICAucmFuZ2UoWzAsIGNoYXJ0V2lkdGhdKTtcblxuICAgICAgICB2YXIgeSA9IGQzLnNjYWxlLmxpbmVhcigpXG4gICAgICAgICAgICAucmFuZ2UoW2NoYXJ0SGVpZ2h0ICsgZ2FwQmV0d2Vlbkdyb3VwcywgMF0pO1xuXG4gICAgICAgIHlBeGlzID0gZDMuc3ZnLmF4aXMoKVxuICAgICAgICAgICAgLnNjYWxlKHkpXG4gICAgICAgICAgICAudGlja0Zvcm1hdCgnJylcbiAgICAgICAgICAgIC50aWNrU2l6ZSgwKVxuICAgICAgICAgICAgLm9yaWVudChcImxlZnRcIik7XG5cbiAgICAgICAgdmFyIHN2ZyA9IGNoYXJ0XG4gICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIHNwYWNlRm9yTGFiZWxzICsgY2hhcnRXaWR0aCArIHNwYWNlRm9yTGVnZW5kKVxuICAgICAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgY2hhcnRIZWlnaHQpO1xuXG4gICAgICAgIC8vIEdldCB0aGUgbm9kZXNcbiAgICAgICAgdmFyIGJhck5vZGVzID0gc3ZnLnNlbGVjdEFsbChcImdcIikuZGF0YSh6aXBwZWREYXRhLCBmdW5jdGlvbiAoZCwgaSkge1xuICAgICAgICAgICAgcmV0dXJuIFtkLCBpXTtcbiAgICAgICAgfSlcblxuICAgICAgICAvLyBDcmVhdGUgYmFyc1xuICAgICAgICB2YXIgYmFyID0gYmFyTm9kZXNcbiAgICAgICAgICAgIC5lbnRlcigpXG4gICAgICAgICAgICAuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIHNwYWNlRm9yTGFiZWxzICsgXCIsXCIgKyAoaSAqIGJhckhlaWdodCArIGdhcEJldHdlZW5Hcm91cHMgKiAoMC41ICsgTWF0aC5mbG9vcihpIC8gZGF0YS5zZXJpZXMubGVuZ3RoKSkpICsgXCIpXCI7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBDcmVhdGUgcmVjdGFuZ2xlcyBvZiB0aGUgY29ycmVjdCB3aWR0aFxuICAgICAgICBiYXIuYXBwZW5kKFwicmVjdFwiKVxuICAgICAgICAgICAgLmF0dHIoXCJmaWxsXCIsIGZ1bmN0aW9uKGQsIGkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sb3IoaSAlIGRhdGEuc2VyaWVzLmxlbmd0aCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImJhclwiKVxuICAgICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB4KVxuICAgICAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgYmFySGVpZ2h0IC0gMSk7XG5cbiAgICAgICAgLy8gQWRkIHRleHQgbGFiZWwgaW4gYmFyXG4gICAgICAgIGJhci5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAgICAgICAuYXR0cihcInhcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB4KGQpIC0gMztcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYXR0cihcInlcIiwgYmFySGVpZ2h0IC8gMilcbiAgICAgICAgICAgIC5hdHRyKFwiZmlsbFwiLCBcInJlZFwiKVxuICAgICAgICAgICAgLmF0dHIoXCJkeVwiLCBcIi4zNWVtXCIpXG4gICAgICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGQ7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBEcmF3IGxhYmVsc1xuICAgICAgICBiYXIuYXBwZW5kKFwidGV4dFwiKVxuICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImxhYmVsXCIpXG4gICAgICAgICAgICAuYXR0cihcInhcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAtMTA7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmF0dHIoXCJ5XCIsIGdyb3VwSGVpZ2h0IC8gMilcbiAgICAgICAgICAgIC5hdHRyKFwiZHlcIiwgXCIuMzVlbVwiKVxuICAgICAgICAgICAgLnRleHQoZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICAgICAgICAgIGlmIChpICUgZGF0YS5zZXJpZXMubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5sYWJlbHNbTWF0aC5mbG9vcihpIC8gZGF0YS5zZXJpZXMubGVuZ3RoKV07XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJcIlxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gRGVsZXRlIHRoZSBleHRyYSBub2Rlc1xuICAgICAgICBiYXJOb2Rlcy5leGl0KClcbiAgICAgICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAgIC5zdHlsZSh7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5yZW1vdmUoKTtcblxuICAgICAgICBzdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInkgYXhpc1wiKVxuICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBzcGFjZUZvckxhYmVscyArIFwiLCBcIiArIC1nYXBCZXR3ZWVuR3JvdXBzIC8gMiArIFwiKVwiKVxuICAgICAgICAgICAgLmNhbGwoeUF4aXMpO1xuXG4gICAgICAgIC8vIERyYXcgbGVnZW5kXG4gICAgICAgIHZhciBsZWdlbmRSZWN0U2l6ZSA9IDE4LFxuICAgICAgICAgICAgbGVnZW5kU3BhY2luZyA9IDQ7XG5cbiAgICAgICAgdmFyIGxlZ2VuZERhdGEgPSBzdmcuc2VsZWN0QWxsKCcubGVnZW5kJylcbiAgICAgICAgICAgIC5kYXRhKGRhdGEuc2VyaWVzKTtcblxuICAgICAgICB2YXIgbGVnZW5kID0gbGVnZW5kRGF0YVxuICAgICAgICAgICAgLmVudGVyKClcbiAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKGQsIGkpIHtcbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gbGVnZW5kUmVjdFNpemUgKyBsZWdlbmRTcGFjaW5nO1xuICAgICAgICAgICAgICAgIHZhciBvZmZzZXQgPSAtZ2FwQmV0d2Vlbkdyb3VwcyAvIDI7XG4gICAgICAgICAgICAgICAgdmFyIGhvcnogPSBzcGFjZUZvckxhYmVscyArIGNoYXJ0V2lkdGggKyA0MCAtIGxlZ2VuZFJlY3RTaXplO1xuICAgICAgICAgICAgICAgIHZhciB2ZXJ0ID0gaSAqIGhlaWdodCAtIG9mZnNldDtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgaG9yeiArICcsJyArIHZlcnQgKyAnKSc7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBsZWdlbmQuYXBwZW5kKCdyZWN0JylcbiAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIGxlZ2VuZFJlY3RTaXplKVxuICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGxlZ2VuZFJlY3RTaXplKVxuICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb2xvcihpKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc3R5bGUoJ3N0cm9rZScsIGZ1bmN0aW9uKGQsIGkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sb3IoaSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBsZWdlbmQuYXBwZW5kKCd0ZXh0JylcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsZWdlbmQnKVxuICAgICAgICAgICAgLmF0dHIoJ3gnLCBsZWdlbmRSZWN0U2l6ZSArIGxlZ2VuZFNwYWNpbmcpXG4gICAgICAgICAgICAuYXR0cigneScsIGxlZ2VuZFJlY3RTaXplIC0gbGVnZW5kU3BhY2luZylcbiAgICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZC5sYWJlbDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIGxlZ2VuZERhdGEuZXhpdCgpLnJlbW92ZSgpO1xuICAgIH1cbn0oKSlcbiIsIi8qKlxuICog5paH5Lu25piv55+p5b2i5Zu+55qE5Luj56CBXG4gKiBAdHlwZSB7e3NldHRpbmdzLCBpbml0LCBzaG93fX1cbiAqL1xudmFyIFRyZWVtYXAgPSAoZnVuY3Rpb24oKSB7XG4gICAgdmFyIHcgPSA5NzAsXG4gICAgICAgIGggPSA1MDAsXG4gICAgICAgIHggPSBkMy5zY2FsZS5saW5lYXIoKS5yYW5nZShbMCwgd10pLFxuICAgICAgICB5ID0gZDMuc2NhbGUubGluZWFyKCkucmFuZ2UoWzAsIGhdKSxcbiAgICAgICAgY29sb3IgPSBkMy5zY2FsZS5jYXRlZ29yeTIwYygpLFxuICAgICAgICByb290ID0gW10sXG4gICAgICAgIG5vZGUgPSBbXSxcbiAgICAgICAgY2hhcnQsXG4gICAgICAgIHRyZWVtYXAsXG4gICAgICAgIHN2ZztcblxuICAgIHJldHVybiB7XG4gICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICB0aXRsZTogXCJ0cmVlbWFwVGl0bGVcIixcbiAgICAgICAgICAgIGRlc2M6IFwidHJlZW1hcERlc2NcIixcbiAgICAgICAgICAgIHRyZWVtYXBJZDogXCIjdHJlZW1hcElkXCJcbiAgICAgICAgfSxcblxuICAgICAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0cmVlbWFwSWQgPSB0aGlzLnNldHRpbmdzLnRyZWVtYXBJZDtcblxuICAgICAgICAgICAgZDMuc2VsZWN0KFwiI3RyZWVtYXBUaXRsZVwiKS50ZXh0KHRoaXMuc2V0dGluZ3MudGl0bGUpO1xuICAgICAgICAgICAgZDMuc2VsZWN0KFwiI3RyZWVtYXBEZXNjXCIpLnRleHQodGhpcy5zZXR0aW5ncy5kZXNjKTtcblxuICAgICAgICAgICAgY2hhcnQgPSBkMy5zZWxlY3QodHJlZW1hcElkKS5hcHBlbmQoXCJkaXZcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiY2hhcnRcIilcbiAgICAgICAgICAgICAgICAuc3R5bGUoXCJ3aWR0aFwiLCB3ICsgXCJweFwiKVxuICAgICAgICAgICAgICAgIC5zdHlsZShcImhlaWdodFwiLCBoICsgXCJweFwiKVxuXG4gICAgICAgICAgICBzdmcgPSBjaGFydFxuICAgICAgICAgICAgICAgIC5hcHBlbmQoXCJzdmdcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIHcpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaClcbiAgICAgICAgICAgICAgICAuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKC41LC41KVwiKTtcblxuICAgICAgICAgICAgdHJlZW1hcCA9IGQzLmxheW91dC50cmVlbWFwKClcbiAgICAgICAgICAgICAgICAvLyAucm91bmQoZmFsc2UpXG4gICAgICAgICAgICAgICAgLnNpemUoW3csIGhdKVxuICAgICAgICAgICAgICAgIC8vIC5zdGlja3koZmFsc2UpXG4gICAgICAgICAgICAgICAgLnZhbHVlKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQud2F0Y2hlcnNfY291bnQ7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2hvdzogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgc2hvd0NoYXJ0KGRhdGEpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2hvd0NoYXJ0KGRhdGEpIHtcbiAgICAgICAgbm9kZSA9IHJvb3QgPSBVdGlscy5nZXRUcmVlRGF0YShkYXRhKTtcblxuICAgICAgICB2YXIgbm9kZXMgPSB0cmVlbWFwLm5vZGVzKHJvb3QpXG4gICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gIWQuY2hpbGRyZW47XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB2YXIgY2VsbCA9IHN2Zy5zZWxlY3RBbGwoXCJnXCIpXG4gICAgICAgICAgICAuZGF0YShub2RlcywgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkLndhdGNoZXJzX2NvdW50O1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lbnRlcigpXG4gICAgICAgICAgICAuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImNlbGxcIilcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBkLnggKyBcIixcIiArIGQueSArIFwiKVwiO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gem9vbShub2RlID09IGQucGFyZW50ID8gcm9vdCA6IGQucGFyZW50KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIGNlbGwuYXBwZW5kKFwicmVjdFwiKVxuICAgICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGQuZHggLSAxO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZC5keSAtIDE7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN0eWxlKFwiZmlsbFwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yKGQucGFyZW50Lm5hbWUpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgY2VsbC5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAgICAgICAuYXR0cihcInhcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAyICogZC5keCAvIDMgKyAyMDtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYXR0cihcInlcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkLmR5IC8gMjtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYXR0cihcImR5XCIsIFwiLjM1ZW1cIilcbiAgICAgICAgICAgIC5hdHRyKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIilcbiAgICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZC5uYW1lO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdHlsZShcIm9wYWNpdHlcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgIGQudyA9IHRoaXMuZ2V0Q29tcHV0ZWRUZXh0TGVuZ3RoKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuIGQuZHggPiBkLncgPyAxIDogMDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIHN2Zy5zZWxlY3RBbGwoXCJnXCIpXG4gICAgICAgICAgICAuZGF0YShub2RlcylcbiAgICAgICAgICAgIC5leGl0KClcbiAgICAgICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAgIC5zdHlsZSh7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5yZW1vdmUoKTtcblxuICAgICAgICBkMy5zZWxlY3Qod2luZG93KS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgem9vbShyb290KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZDMuc2VsZWN0KFwiI3RyZWVtYXBTZWxlY3RcIikub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0cmVlbWFwLnZhbHVlKHRoaXMudmFsdWUgPT0gXCJ3YXRjaGVyc1wiID8gd2F0Y2hlcnNDb3VudCA6IGZvcmtzQ291bnQpLm5vZGVzKHJvb3QpO1xuICAgICAgICAgICAgem9vbShub2RlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gd2F0Y2hlcnNDb3VudChkKSB7XG4gICAgICAgIHJldHVybiBkLndhdGNoZXJzX2NvdW50O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZvcmtzQ291bnQoZCkge1xuICAgICAgICByZXR1cm4gZC5mb3Jrc19jb3VudDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB6b29tKGQpIHtcbiAgICAgICAgdmFyIGt4ID0gdyAvIGQuZHgsXG4gICAgICAgICAgICBreSA9IGggLyBkLmR5O1xuICAgICAgICB4LmRvbWFpbihbZC54LCBkLnggKyBkLmR4XSk7XG4gICAgICAgIHkuZG9tYWluKFtkLnksIGQueSArIGQuZHldKTtcblxuICAgICAgICB2YXIgdCA9IHN2Zy5zZWxlY3RBbGwoXCJnLmNlbGxcIikudHJhbnNpdGlvbigpXG4gICAgICAgICAgICAuZHVyYXRpb24oZDMuZXZlbnQuYWx0S2V5ID8gNzUwMCA6IDc1MClcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyB4KGQueCkgKyBcIixcIiArIHkoZC55KSArIFwiKVwiO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgdC5zZWxlY3QoXCJyZWN0XCIpXG4gICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ga3ggKiBkLmR4IC0gMTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYXR0cihcImhlaWdodFwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGt5ICogZC5keSAtIDE7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgIHQuc2VsZWN0KFwidGV4dFwiKVxuICAgICAgICAgICAgLmF0dHIoXCJ4XCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMiAqIGt4ICogZC5keCAvIDMgKyAyMDtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYXR0cihcInlcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBreSAqIGQuZHkgLyAyO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdHlsZShcIm9wYWNpdHlcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgIC8vIHJldHVybiBreCAqIGQuZHggPiBkLncgPyAxIDogMDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIG5vZGUgPSBkO1xuICAgICAgICBkMy5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9XG5cbn0oKSlcbiIsIihmdW5jdGlvbigpIHtcbiAgICB2YXIgbG9hZGluZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibW9kYWxcIik7XG5cbiAgICAvKipcbiAgICAgKiBTZWFyY2hcbiAgICAgKi9cbiAgICBTZWFyY2hlci5pbml0KCk7XG5cbiAgICAvKipcbiAgICAgKiBzdGFydCBCYXJDaGFydFxuICAgICAqL1xuICAgIEJhci5zZXR0aW5ncyA9IHtcbiAgICAgICAgdGl0bGU6IFwiVG9wMTAwIEJhckNoYXJ0XCIsXG4gICAgICAgIGRlc2M6IFwiVGhpcyBpcyBhIGdvb2QgZXhhbXBsZS5cIixcbiAgICAgICAgYmFySWQ6IFwiI2JhcklkXCJcbiAgICB9XG4gICAgQmFyLmluaXQoKTtcblxuICAgIC8qKlxuICAgICAqIHN0YXJ0IHRyZWVtYXBcbiAgICAgKi9cbiAgICBUcmVlbWFwLnNldHRpbmdzID0ge1xuICAgICAgICB0aXRsZTogXCJUb3AxMDAgdHJlZW1hcFwiLFxuICAgICAgICBkZXNjOiBcIllvdSBjYW4gY2xpY2sgdGhlIGJsb2NrIHRvIHpvb20gaXQuXCIsXG4gICAgICAgIHRyZWVtYXBJZDogXCIjc2FjZGxUcmVlbWFwXCJcbiAgICB9XG4gICAgVHJlZW1hcC5pbml0KCk7XG5cbiAgICBmdW5jdGlvbiBzaG93KHVybCkge1xuICAgICAgICB2YXIgbG9hZGVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGxvYWRpbmcuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgfSwgMzAwKTtcblxuICAgICAgICB1cmwgPSB1cmwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9zZWFyY2gnO1xuXG4gICAgICAgIGQzLmpzb24odXJsLCBmdW5jdGlvbihlcnIsIGRhdGEpIHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQobG9hZGVyKTtcbiAgICAgICAgICAgICAgICBsb2FkaW5nLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICBhbGVydChcIuWKoOi9veaVsOaNruWksei0pe+8jOivt+ajgOafpeaCqOeahOe9kee7nOiuvue9ruOAglwiKVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgVXRpbHMuZ2V0RGF0YShkYXRhKTtcblxuICAgICAgICAgICAgQmFyLnNob3coKTtcbiAgICAgICAgICAgIFRyZWVtYXAuc2hvdygpO1xuXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQobG9hZGVyKTtcbiAgICAgICAgICAgIGxvYWRpbmcuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBTZWFyY2hlci5hZGRMaXN0ZW5lcihmdW5jdGlvbih1cmwpIHtcbiAgICAgICAgc2hvdyh1cmwpO1xuICAgIH0pXG5cbiAgICBzaG93KCk7XG59KSgpXG4iXX0=
